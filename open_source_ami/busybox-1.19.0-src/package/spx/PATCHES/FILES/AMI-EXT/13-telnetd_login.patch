--- busybox.old/networking/telnetd.c	2008-11-09 22:57:59.000000000 +0530
+++ busybox.new/networking/telnetd.c	2011-04-29 14:57:29.664688755 +0530
@@ -25,6 +25,7 @@
 
 #include "libbb.h"
 #include <syslog.h>
+#include "projdef.h"
 
 #if DEBUG
 #define TELCMDS
@@ -56,7 +57,11 @@
 /* Globals */
 static int maxfd;
 static struct tsession *sessions;
-static const char *loginpath = "/bin/login";
+#ifdef CONFIG_SPX_FEATURE_GLOBAL_TELNET_AUTHENTICATION
+	static const char *loginpath = "/usr/local/bin/authshell";
+#else
+	static const char *loginpath = "/bin/login";
+#endif
 static const char *issuefile = "/etc/issue.net";
 
 
