--- u-boot-1.1.6/cpu/arm926ejs/interrupts.c	2005-12-17 00:39:27.000000000 +0800
+++ u-boot-1.1.6-ami/cpu/arm926ejs/interrupts.c	2009-07-31 17:30:25.000000000 +0800
@@ -165,14 +165,22 @@
 	bad_mode ();
 }
 
+#ifdef CONFIG_AST2300
+extern void HandleIntr(void);
+void do_irq (struct pt_regs *pt_regs)
+{
+	HandleIntr();
+}
+#else
 void do_irq (struct pt_regs *pt_regs)
 {
 	printf ("interrupt request\n");
 	show_regs (pt_regs);
 	bad_mode ();
 }
+#endif
 
-#ifdef CONFIG_INTEGRATOR
+#if defined(CONFIG_INTEGRATOR) || defined(CONFIG_AST2300)
 
 	/* Timer functionality supplied by Integrator board (AP or CP) */
 
